<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
</head>
<body>
<h1>‚Ð‚½‚·‚ç“ü—Íƒhƒ‰ƒ€</h1>
<textarea cols="90" rows="30" onkeyup="Play(value)"></textarea>


<script type="text/javascript">

    if(typeof(webkitAudioContext)!=="undefined")
        var audioctx = new webkitAudioContext();
    else if(typeof(AudioContext)!=="undefined")
        var audioctx = new AudioContext();

    var buffer = null;
    LoadSample(audioctx, "./SNARE_1.WAV");

    function Play() {
        var src = audioctx.createBufferSource();
        src.buffer = buffer;
        src.connect(audioctx.destination);
        src.start(0);
    }

    function LoadSample(ctx, url) {
        var req = new XMLHttpRequest();
        req.open("GET", url, true);
        req.responseType = "arraybuffer";
        req.onload = function() {
            if(req.response) {
//          buffer = ctx.createBuffer(req.response, false);
                ctx.decodeAudioData(req.response,function(b){buffer=b;},function(){});
            }
            else
                buffer = ctx.createBuffer(VBArray(req.responseBody).toArray(), false);
        }
        req.send();
    }

</script>

</body>
</html>